<div class="animated fadeIn" *ngIf="!viewpage">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <strong>{{ pageTitle | titlecase }}</strong>
        </div>
        <form #adminForm="ngForm" (ngSubmit)="onFormSubmit(adminForm)" autocomplete="off">
          <div class="card-body">
            <div class="form-group grouping-strains row">
              <!-- <div class="col-md-4">
                                <div class="group-control">
                                    <label for="username">Username <span class="mandatory">*</span> </label>
                                    <input type="text" id="username" ngModel name="username" #username="ngModel"
                                        required class="form-control" placeholder="Enter Username"
                                        [ngClass]="{ 'is-invalid': adminForm.submitted && username.errors }"
                                        [ngClass]="{ 'is-valid': !username.errors && username.valid}">
                                    <div *ngIf="adminForm.submitted && !username.valid">
                                        <div class="invalid-feedback" *ngIf="username.errors.required">Username is
                                            required.
                                        </div>
                                    </div>
                                </div>
                            </div> -->
              <div class="col-lg-12 row">
                <div class="col-md-6">
                  <div class="group-control">
                    <label for="name">Name <span class="mandatory">*</span>
                    </label>
                    <input type="text" id="name" ngModel name="name" #name="ngModel" required class="form-control"
                      placeholder="Enter Name" [maxlength]="50" [ngClass]="{
                        'is-invalid': adminForm.submitted && name.errors
                      }" [ngClass]="{ 'is-valid': !name.errors && name.valid }" />
                    <div *ngIf="adminForm.submitted && !name.valid">
                      <div class="invalid-feedback" *ngIf="name.errors.required">
                        Name is required.
                      </div>

                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="group-control">
                    <label for="email">E-Mail <span class="mandatory">*</span></label>
                    <input type="text" id="email" ngModel name="email" #email="ngModel" autocomplete="off"
                      class="form-control" placeholder="Enter E-Mail"
                      pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"  required [disabled]="disableinput"
                      [ngClass]="{
                        'is-valid':
                          email.valid &&
                          (email.dirty || email.touched || adminForm.submitted),
                        'is-invalid':
                          email.invalid &&
                          (email.dirty || email.touched || adminForm.submitted)
                      }" />
                    <div *ngIf="adminForm.submitted && !email.valid && !disableinput">
                      <div class="invalid-feedback" *ngIf="email.errors.required">
                        Email is required.
                      </div>
                      <div class="invalid-feedback" *ngIf="email.errors.email">
                        Please enter valid Email
                      </div>
                      <div class="invalid-feedback" *ngIf="!email.errors.email && email.errors.pattern">
                        Please enter valid Email
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-12 row" *ngIf="!id">
                <div class="col-md-6">
                  <div class="group-control">
                    <label for="password">Password <span class="mandatory">*</span></label>
                    <input type="password" id="password" ngModel name="password" #password="ngModel" autocomplete="new-password" required class="form-control" minlength="8" maxlength="18" placeholder="Enter Password" pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&]).{8,}" [ngClass]="{ 'is-invalid': adminForm.submitted && password.errors }" [ngClass]="{ 'is-valid': adminForm.submitted && !password.errors }">
                    <span class="input-group-tex" (click)="togglePasswordVisibility('password')">
                        <i class="fa" [ngClass]="{'fa-eye': passwordVisible.password, 'fa-eye-slash': !passwordVisible.password}" aria-hidden="true"></i>
                    </span>
                    <div *ngIf="adminForm.submitted && !password.valid">
                        <div class="invalid-feedback" *ngIf="password.errors && password.errors.required">Password is required.</div>
                        <div class="invalid-feedback" *ngIf="password.errors && password.errors.pattern">Password must contain lowercase, uppercase, number, and special character</div>
                        <div class="invalid-feedback" *ngIf="password.errors && password.errors.minlength">Minimum 8 characters required</div>
                        <div class="invalid-feedback" *ngIf="password.errors && password.errors.maxlength">Maximum 18 characters required</div>
                    </div>
                </div>
            </div>
                <div class="col-md-6">
                  <div class="group-control">
                    <label for="confirm_password">Confirm Password <span class="mandatory">*</span></label>
                    <input type="password" id="confirm_password" ngModel name="confirmPassword"
                      #confirm_password="ngModel" required class="form-control" placeholder="Enter Confirm Password"
                      [ngClass]="{ 'is-invalid': adminForm.submitted && (confirm_password.errors || password.value !== confirm_password.value) }"
                      [ngClass]="{ 'is-valid': adminForm.submitted && !confirm_password.errors && password.value === confirm_password.value }">
                    <span class="input-group-tex" (click)="togglePasswordVisibility('confirm_password')">
                      <i class="fa"
                        [ngClass]="{'fa-eye': passwordVisible.confirm_password, 'fa-eye-slash': !passwordVisible.confirm_password}"
                        aria-hidden="true"></i>
                    </span>
                    <div *ngIf="adminForm.submitted && !confirm_password.valid">
                      <div class="invalid-feedback" *ngIf="confirm_password.errors && confirm_password.errors.required">
                        Confirm Password is required.</div>
                    </div>
                    <div *ngIf="adminForm.submitted && password.value !== confirm_password.value">
                      <div class="invalid-feedback">Password and Confirm Password do not match.</div>
                    </div>
                  </div>
                </div>

                <!-- <div class="col-md-6">
                  <div class="group-control">
                      <label for="password">Password <span class="mandatory">*</span></label>
                      <input type="password" id="password" ngModel name="password" #password="ngModel" autocomplete="new-password" required class="form-control" minlength="12" maxlength="18" placeholder="Enter Password" pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&]).{8,}" [ngClass]="{ 'is-invalid': adminForm.submitted && password.errors }" [ngClass]="{ 'is-valid': adminForm.submitted && !password.errors }">
                      <div *ngIf="adminForm.submitted && !password.valid">
                          <div class="invalid-feedback" *ngIf="password.errors && password.errors.required">Password is required.</div>
                          <div class="invalid-feedback" *ngIf="password.errors && password.errors.pattern">Password must contain lowercase, uppercase, number, and special character</div>
                          <div class="invalid-feedback" *ngIf="password.errors && password.errors.minlength">Minimum 12 characters required</div>
                          <div class="invalid-feedback" *ngIf="password.errors && password.errors.maxlength">Maximum 18 characters required</div>
                      </div>
                  </div>
              </div>
              <div class="col-md-6">
                  <div class="group-control">
                      <label for="confirm_password">Confirm Password <span class="mandatory">*</span></label>
                      <input type="password" id="confirm_password" ngModel name="confirmPassword" #confirm_password="ngModel" required class="form-control" placeholder="Enter Confirm Password" [ngClass]="{ 'is-invalid': adminForm.submitted && (confirm_password.errors || password.value !== confirm_password.value) }" [ngClass]="{ 'is-valid': adminForm.submitted && !confirm_password.errors && password.value === confirm_password.value }">
                      <div *ngIf="adminForm.submitted && !confirm_password.valid">
                          <div class="invalid-feedback" *ngIf="confirm_password.errors && confirm_password.errors.required">Confirm Password is required.</div>
                      </div>
                      <div *ngIf="adminForm.submitted && password.value !== confirm_password.value">
                          <div class="invalid-feedback">Password and Confirm Password do not match.</div>
                      </div>
                  </div>
              </div>
                 -->

              </div>
              <div class="col-lg-12 row">
                <div class="col-md-6">
                  <div class="group-control">
                    <label for="name">Mobile <span class="mandatory">*</span>
                    </label>
                    <input type="text" id="mobile" ngModel #mobile="ngModel" minlength="10" maxlength="10" required
                      class="form-control" name="mobile" placeholder="Enter mobile"
                      pattern="^(\+?\d{1,4}[\s-])?(?!0+\s+,?$)\d{10}\s*,?$" [ngClass]="{
                        'is-invalid': adminForm.submitted && mobile.errors
                      }" [ngClass]="{ 'is-valid': !mobile.errors && mobile.valid }" />
                    <div *ngIf="adminForm.submitted && !mobile.valid">
                      <div class="invalid-feedback" *ngIf="mobile.errors.required">
                        Mobile is required.
                      </div>

                      <div class="invalid-feedback" *ngIf="mobile.errors.pattern">
                        Please enter a valid 10-digit mobile number
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="group-control">
                    <label for="status">Status <span class="mandatory">*</span></label>
                    <select name="status" id="status" class="form-control" ngModel name="status" #status="ngModel"
                      required [ngClass]="{
                        'is-invalid': adminForm.submitted && status.errors
                      }" [ngClass]="{ 'is-valid': !status.errors && status.valid }">
                      <option value="">--Select--</option>
                      <option value="1">Active</option>
                      <option value="2">Inactive</option>
                    </select>
                    <div *ngIf="adminForm.submitted && !status.valid">
                      <div class="invalid-feedback" *ngIf="status.errors.required">
                        Status is required.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-group grouping-strains row">
              <div class="col-md-12">
                <div class="custom-checkbox-select-all">
                  <div class="card-header">
                    <strong>Select Privileges</strong>
                  </div>
                  <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" [checked]="isChecked" id="customCheckThis"
                      (change)="selectall($event.target.checked)" />
                    <label class="custom-control-label" for="customCheckThis">Select All</label>
                  </div>
                </div>
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr class="front bg-greensea">
                        <th>Management</th>
                        <th>View</th>
                        <th>Add</th>
                        <th>Edit</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let menu of privilagesdata; let i = index" class="subadminedit">
                        <th>{{ menu.name | titlecase }}</th>
                        <td>
                          <div class="custom-control custom-checkbox mb-2">
                            <input type="checkbox" class="custom-control-input" id="customCheck-{{ i }}-view" (change)="
                                $event.target.checked == true
                                  ? (menu.status.view = true)
                                  : (menu.status.view = false);
                                checkprivilages()
                              " [checked]="menu.status.view" />
                            <label class="custom-control-label" for="customCheck-{{ i }}-view"></label>
                          </div>
                        </td>
                        <td>
                          <div class="custom-control custom-checkbox mb-2">
                            <input type="checkbox" class="custom-control-input" id="customCheck-{{ i }}-add" (change)="
                                $event.target.checked == true
                                  ? (menu.status.add = true)
                                  : (menu.status.add = false);
                                checkprivilages()
                              " [checked]="menu.status.add" />
                            <label class="custom-control-label" for="customCheck-{{ i }}-add"></label>
                          </div>
                        </td>
                        <td>
                          <div class="custom-control custom-checkbox mb-2">
                            <input type="checkbox" class="custom-control-input" id="customCheck-{{ i }}-edit" (change)="
                                $event.target.checked == true
                                  ? (menu.status.edit = true)
                                  : (menu.status.edit = false);
                                checkprivilages()
                              " [checked]="menu.status.edit" />
                            <label class="custom-control-label" for="customCheck-{{ i }}-edit"></label>
                          </div>
                        </td>
                        <td>
                          <div class="custom-control custom-checkbox mb-2">
                            <input type="checkbox" class="custom-control-input" id="customCheck-{{ i }}-delete"
                              (change)="
                                $event.target.checked == true
                                  ? (menu.status.delete = true)
                                  : (menu.status.delete = false);
                                checkprivilages()
                              " [checked]="menu.status.delete" />
                            <label class="custom-control-label" for="customCheck-{{ i }}-delete"></label>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button type="submit" *ngIf="!viewpage" class="btn btn-sm btn-success">
              Submit
            </button>
            <button type="button" *ngIf="!viewpage" routerLink="/app/subadmin/list" class="btn btn-sm btn-danger">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="animated fadeIn" *ngIf="viewpage">
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <!-- <div class="card-header"><strong>Subadmin Details</strong></div> -->
        <div class="tabset-div tabbing-function">
          <tabset type="pills">
            <tab heading="Subadmin Details" customClass="customtabClass"
              style="box-shadow: 0px 1px 10px rgb(161, 161, 161) ; border-radius: 10px;">

              <div class="card-body covers-spaces  ">
                <div class="col-md-8">
                  <div class="spaces-wisths">
                    <div class="dash-details">
                      <span class="heading-pros">Name <span class="qus-alg"> : </span>
                      </span>
                      <span>
                        {{adminDetails?.name | titlecase}}
                      </span>
                    </div>
                    <div class="dash-details">
                      <span class="heading-pros">Email <span class="qus-alg"> : </span>
                      </span>
                      <span>
                        {{adminDetails?.email}}
                      </span>
                    </div>
                    <div class="dash-details">
                      <span class="heading-pros">Mobile <span class="qus-alg"> : </span>
                      </span>
                      <span>
                        {{adminDetails?.mobile}}
                      </span>
                    </div>


                    <div class="dash-details" *ngIf="activedata">
                      <span class="heading-pros">Status<span class="qus-alg"> : </span>
                      </span>
                      <span
                        [ngClass]="{'text-active': adminDetails?.status === '1', 'text-inactive': adminDetails?.status !== '1'}">
                        {{adminDetails?.status === '1' ? 'Active' : 'Inactive'}}
                      </span>
                    </div>



                  </div>
                </div>

              </div>
            </tab>

          </tabset>
        </div>
        <div class="card-footer">
          <button style="background-color: #0737B5; outline-color:  #0737B5;" type="button"
            routerLink="/app/subadmin/list" class="btn btn-danger animated-button">
            Back
          </button>
        </div>
      </div>
    </div>
  </div>
</div>